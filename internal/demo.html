<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'/>
  <meta name='viewport' content='width=device-width,initial-scale=1'/>
  <title>Assure.ai — Internal Demo</title>
  <meta name='robots' content='noindex,nofollow'/>
  <link rel='preconnect' href='https://fonts.gstatic.com' crossorigin>
  <link href='https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap' rel='stylesheet'>
  <script src='https://unpkg.com/mammoth/mammoth.browser.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.6.82/pdf.min.js'></script>
  <style>
    :root{--brand:#0f172a;--accent:#1ea8ff;--accent2:#00bfa6;--bg:#0b1220;--ink:#e5e7eb;--muted:#93a3b8;--line:#1f2a44;--card:#111a2e}
    *{box-sizing:border-box}html,body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,Helvetica,sans-serif}
    header{background:linear-gradient(180deg,#0d1528 0%,#0b1220 100%);border-bottom:1px solid var(--line)}
    .container{max-width:1120px;margin:0 auto;padding:1rem 1.2rem}
    .top{display:flex;align-items:center;gap:.9rem;justify-content:space-between;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:.9rem}.logo{height:40px}h1{font-weight:700;font-size:1.15rem;margin:.15rem 0}
    .back{font-size:.95rem;opacity:.9;text-decoration:none;border:1px solid var(--line);padding:.45rem .7rem;border-radius:10px;background:#0a0f1d;color:var(--ink)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:1rem 1.2rem;margin:1rem 0;box-shadow:0 6px 24px rgba(0,0,0,.25)}
    .row{display:flex;gap:.6rem;flex-wrap:wrap;align-items:center}
    textarea{width:100%;min-height:220px;border:1px solid var(--line);border-radius:12px;background:#0a0f1d;color:var(--ink);padding:.9rem;font-size:1rem}
    select,input[type=checkbox]{background:#0a0f1d;color:var(--ink);border:1px solid var(--line);border-radius:10px;padding:.5rem .6rem}
    .btn{border:1px solid var(--line);background:#0a0f1d;color:var(--ink);padding:.7rem 1rem;border-radius:12px;cursor:pointer}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border:0;color:#04121a;font-weight:700}
    details>summary{cursor:pointer;user-select:none;font-weight:600;list-style:none}
    details>summary::-webkit-details-marker{display:none}
    .summary{display:flex;gap:.6rem;align-items:center}
    .inner{padding:.75rem;border-left:3px solid var(--line)}
    .subbox{border:1px solid var(--line);border-radius:12px;padding:1rem;margin:.6rem 0;background:linear-gradient(180deg,#0c1426 0%,#0b1220 100%)}
    .rule{border-top:1px dashed var(--line);padding:.65rem 0}.rule:first-of-type{border-top:none}
    .rule-head{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap}
    .pill{padding:.2rem .55rem;border-radius:999px;font-size:.8rem;border:1px solid var(--line);font-weight:700;letter-spacing:.02em}
    .pill.pass{background:rgba(34,197,94,.12);color:#7CFFB0;border-color:rgba(34,197,94,.28)}
    .pill.flag{background:rgba(245,158,11,.12);color:#FFD188;border-color:rgba(245,158,11,.28)}
    .pill.fail{background:rgba(239,68,68,.12);color:#FF9A9A;border-color:rgba(239,68,68,.28)}
    .refs{color:var(--muted);font-size:.9rem}
    .progress{position:relative;height:14px;background:#0a0f1d;border-radius:999px;overflow:hidden;margin-top:.6rem;border:1px solid var(--line)}
    .bar{position:absolute;left:0;top:0;bottom:0;width:0%;background:linear-gradient(90deg,#1ea8ff,#00bfa6)}
    .label{margin-top:.45rem;font-size:.92rem;color:var(--muted)}
    code{background:#0a0f1d;border:1px solid var(--line);padding:.15rem .35rem;border-radius:8px}
    small{color:var(--muted)}.score{font-size:1.2rem}.kbd{font-family:ui-monospace,Consolas,monospace;font-size:.85rem;color:var(--muted)}
  </style>
</head>
<body>
<header>
  <div class='container'>
    <div class='top'>
      <div class='brand'>
        <img class='logo' src='/logo.svg' alt='Assure.ai logo'/>
        <div>
          <h1>Assure.ai — Internal Demo</h1>
          <small class='kbd'>Protected • Not indexed • For internal testing</small>
        </div>
      </div>
      <a class='back' href='/'>← Back to site</a>
    </div>
  </div>
</header>

<main class='container'>
  <div class='card'>
    <div class='row' style='justify-content:space-between'>
      <div class='row'>
        <button id='loadGood' class='btn'>Load good sample</button>
        <button id='loadBad' class='btn'>Load bad sample</button>
        <label class='btn'><input id='fileInput' type='file' accept='.txt,.docx,.pdf' hidden/>Import .txt / .docx / .pdf</label>
      </div>
      <div class='row'>
        <label>Advice type:&nbsp;
          <select id='adviceType'>
            <option value='standard' selected>Standard investment/ISA</option>
            <option value='replacement'>Replacement / Switch</option>
            <option value='drawdown'>Retirement income / Drawdown</option>
            <option value='db_transfer'>Pension transfer (DB)</option>
            <option value='bed_isa'>Bed & ISA</option>
          </select>
        </label>
        <label>Channel:&nbsp;
          <select id='channel'>
            <option value='advised' selected>Advised</option>
            <option value='nonadvised'>Non‑advised / Execution‑only</option>
          </select>
        </label>
        <label>Age band:&nbsp;
          <select id='ageBand'>
            <option value='under55'>Under 55</option>
            <option value='55plus' selected>55+</option>
            <option value='75plus'>75+</option>
          </select>
        </label>
        <label><input type='checkbox' id='vulnerable'/> Vulnerability flagged (internal)</label>
      </div>
    </div>
    <textarea id='srText' placeholder='Paste Suitability Report text here…'></textarea>
    <div class='row' style='justify-content:space-between; margin-top:.6rem'>
      <button id='runBtn' class='btn primary'>Run check</button>
      <button id='exportBtn' class='btn'>Export results JSON</button>
    </div>
    <div id='progress' class='progress' hidden>
      <div class='bar' id='bar'></div><div class='label' id='barLabel'>Analysing…</div>
    </div>
  </div>

  <div class='card'>
    <div class='score'>Overall score: <strong><span id='overall'>—</span></strong></div>
    <small>Equal weighting: pass=1, flag=0.5, fail=0. Contextual rules added based on advice/client filters.</small>
    <div><small id='contextNote'></small></div>
  </div>

  <div id='accordion'></div>
</main>

<script src="app.js"></script>
</body></html>
